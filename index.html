<!DOCTYPE html>
<html lang="zh-Hant">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>ColorBday</title>

  <style>
    body {
      margin: 0;
      font-family: "Helvetica Neue", Arial, sans-serif;
      background: #FFF7D6;
      color: #000;
    }

    /* ===== Header ===== */
    header {
      position: sticky;
      top: 0;
      z-index: 10;
      background: #FFF7D6;
      border-bottom: 2px solid #000;
      padding: 20px 28px;
      display: flex;
      flex-direction: column;
      gap: 12px;
    }

    .brand {
      display: flex;
      align-items: center;
      gap: 14px;
      cursor: pointer;
    }

    #logo {
      margin: 0;
      font-size: 28px;
      font-weight: 900;
      border: 2px solid #000;
      padding: 6px 10px;
    }

    .tagline {
      font-size: 13px;
      letter-spacing: 0.08em;
      opacity: 0.55;
      padding-top: 4px;
      white-space: nowrap;
    }

    .selectors select {
      padding: 8px 10px;
      font-size: 15px;
      border: 2px solid #000;
      background: #fff;
      margin-right: 10px;
    }

    /* ===== Grid ===== */
    .grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(180px, 1fr));
      gap: 28px;
      padding: 40px 60px;
      justify-items: center;
    }

    .color-box {
      width: 180px;
      border: 2px solid #000;
      background: #fff;
      cursor: pointer;
      transition: transform .2s ease, box-shadow .2s ease;
    }

    .color-box:hover {
      transform: translateY(-6px);
      box-shadow: 0 10px 18px rgba(0,0,0,.2);
    }

    .swatch {
      height: 150px;
      border-bottom: 2px solid #000;
    }

    .info {
      padding: 12px;
      font-size: 13px;
      line-height: 1.5;
    }

    .label {
      font-weight: 900;
      letter-spacing: 0.06em;
    }

    .code {
      opacity: .6;
      margin-top: 4px;
    }

    .detail {
      margin-top: 14px;
      font-size: 13px;
      opacity: .75;
    }

    .action {
      margin-top: 14px;
      font-size: 12px;
      opacity: .6;
      cursor: pointer;
      text-decoration: underline;
    }
  </style>
</head>

<body>

<header>
  <div class="brand" id="homeBtn">
    <h1 id="logo">ColorBday</h1>
    <span class="tagline">Your birthday, your color</span>
  </div>

  <div class="selectors">
    <select id="month">
      <option value="">Month</option>
    </select>
    <select id="day">
      <option value="">Day</option>
    </select>
  </div>
</header>

<div class="grid" id="colorGrid"></div>

<script>
  const grid = document.getElementById("colorGrid");
  const monthSel = document.getElementById("month");
  const daySel = document.getElementById("day");

  /* ===== Date utils ===== */
  function isLeapYear(y) {
    return (y % 4 === 0 && y % 100 !== 0) || y % 400 === 0;
  }

  function daysInMonth(month, year) {
    return [31, isLeapYear(year) ? 29 : 28, 31, 30, 31, 30, 31, 31, 30, 31, 30, 31][month - 1];
  }

  /* ===== Color generator (Morandi) ===== */
  function generateColor(seed) {
    const hue = (seed * 47) % 360;
    const saturation = 22 + seed % 10;
    const lightness = 62 + seed % 8;
    return `hsl(${hue}, ${saturation}%, ${lightness}%)`;
  }

  /* ===== Card ===== */
  function createCard(mm, dd) {
    const seed = mm * 100 + dd;
    const color = generateColor(seed);

    return `
      <div class="color-box" onclick="goToDate(${mm},${dd})">
        <div class="swatch" style="background:${color}"></div>
        <div class="info">
          <div class="label">COLORBDAY</div>
          <div class="code">${String(mm).padStart(2,"0")}${String(dd).padStart(2,"0")} TPG</div>

          <div class="detail">
            ${new Date(2024, mm-1, dd).toLocaleString("en",{month:"long",day:"numeric"})}<br>
            Calm · Soft · Balanced
          </div>

          <div class="action" onclick="copyLink(event,'${String(mm).padStart(2,"0")}${String(dd).padStart(2,"0")}')">
            Copy link
          </div>
        </div>
      </div>
    `;
  }

  /* ===== Render ===== */
  function renderAll() {
    grid.innerHTML = "";
    for (let m=1; m<=12; m++) {
      for (let d=1; d<=daysInMonth(m, new Date().getFullYear()); d++) {
        grid.innerHTML += createCard(m,d);
      }
    }
  }

  function renderSingle(mm,dd) {
    grid.innerHTML = createCard(mm,dd);
  }

  /* ===== Navigation ===== */
  function goToDate(m,d){
    history.pushState({}, "", `?date=${String(m).padStart(2,"0")}${String(d).padStart(2,"0")}`);
    monthSel.value = m;
    daySel.value = d;
    renderSingle(m,d);
  }

  document.getElementById("homeBtn").onclick = () => {
    history.pushState({}, "", location.pathname);
    monthSel.value = "";
    daySel.value = "";
    renderAll();
  };

  function copyLink(e,code){
    e.stopPropagation();
    const url = `${location.origin}${location.pathname}?date=${code}`;
    navigator.clipboard.writeText(url);
    alert("Link copied!");
  }

  /* ===== Init ===== */
  for(let m=1;m<=12;m++) monthSel.innerHTML += `<option value="${m}">${m}</option>`;

  monthSel.onchange = () => {
    daySel.innerHTML = `<option value="">Day</option>`;
    if(!monthSel.value) return;
    for(let d=1; d<=daysInMonth(monthSel.value,new Date().getFullYear()); d++){
      daySel.innerHTML += `<option value="${d}">${d}</option>`;
    }
  };

  daySel.onchange = () => {
    if(monthSel.value && daySel.value){
      goToDate(parseInt(monthSel.value), parseInt(daySel.value));
    }
  };

  const params = new URLSearchParams(location.search);
  if(params.get("date")){
    const mm = parseInt(params.get("date").slice(0,2));
    const dd = parseInt(params.get("date").slice(2,4));
    goToDate(mm,dd);
  } else {
    renderAll();
  }
</script>

</body>
</html>
